window.addEventListener("DOMContentLoaded",(function(){"use strict";const e=document.querySelector("html"),t=document.querySelector("body"),o=document.querySelector(".cat-search"),s=document.querySelector(".search-form__close"),l=document.querySelector(".cat-page__search-form"),c=document.querySelector("#cat-search-input");function d(){l.classList.contains("unfolded")&&(l.classList.add("rolled"),setTimeout((()=>{l.classList.remove("unfolded")}),600))}o.addEventListener("click",(function(){l.classList.remove("rolled"),l.classList.add("unfolded")})),s.addEventListener("click",(function(){d(),l.reset()})),l.addEventListener("submit",(function(e){e.preventDefault()}));const n=document.querySelector("#all-items"),a=document.querySelector('label[for="all-items"]'),i=document.querySelectorAll(".cat-page__item-checkbox"),r=document.querySelectorAll(".cat-page__options-buttons .option"),u=document.querySelector(".checkout-button");function m(e,t){e.checked=t,t?e.closest(".cat-page__item").classList.add("selected"):e.closest(".cat-page__item").classList.remove("selected")}function p(e){for(let t=0;t<r.length;t++)e?r[t].classList.remove("disabled"):r[t].classList.add("disabled")}window.matchMedia("(max-width: 549px)").matches&&(a.textContent="Все"),i.length>0?n.classList.remove("disabled"):(n.classList.add("disabled"),n.checked=!1,p(0),o.classList.add("disabled"),u.classList.add("disabled"));const g=document.querySelector(".cat-page__options"),f=1*window.getComputedStyle(g).getPropertyValue("height").replace("px",""),y=1*window.getComputedStyle(g).getPropertyValue("width").replace("px",""),h=g.closest(".col-inner"),L=document.querySelector(".cat-page__left"),b=document.querySelector(".header"),w=1*window.getComputedStyle(b).getPropertyValue("height").replace("px","");function _(){document.querySelectorAll(".cat-page__item").length>=2?g.classList.add("can-be-fixed"):(g.classList.remove("can-be-fixed"),g.classList.remove("fixed"),g.classList.remove("bottom"),g.style.top="auto",g.style.bottom="auto",L.style.paddingTop=0)}_(),window.addEventListener("scroll",(function(){if(g.classList.contains("can-be-fixed")){let e=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement||document.body.parentNode||document.body,t=L.getBoundingClientRect().top+window.pageYOffset,o=h.getBoundingClientRect().bottom+e,s=function(){let e=document.querySelectorAll(".cat-page__item");return e[e.length-2]}().getBoundingClientRect().bottom+e,l=o-s,c=e+w;c>=t?(g.classList.add("fixed"),g.classList.remove("bottom"),g.style.top=w+"px",g.style.bottom="auto",g.style.width=y+"px",L.style.paddingTop=f+"px",s-f+1<=c&&(g.classList.remove("fixed"),g.classList.add("bottom"),g.style.top="auto",g.style.bottom=l+"px")):(g.classList.remove("fixed"),g.style.top="auto",g.style.bottom="auto",L.style.paddingTop=0)}}));const v=document.querySelector(".cat-page__sidebar_outer"),x=document.querySelector(".cat-page__sidebar"),S=window.getComputedStyle(v).getPropertyValue("width").replace("px","");function q(){let e=1*window.getComputedStyle(v).getPropertyValue("height").replace("px","");e<1*window.getComputedStyle(L).getPropertyValue("height").replace("px","")&&window.matchMedia("(min-width: 1025px)").matches&&window.innerHeight-w-10>e?v.classList.add("can-be-fixed"):(v.classList.remove("can-be-fixed"),v.classList.remove("fixed"),v.classList.remove("bottom"),v.style.top="auto",v.style.bottom="auto")}q(),window.addEventListener("scroll",(function(){if(v.classList.contains("can-be-fixed")){let e=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement||document.body.parentNode||document.body,t=x.getBoundingClientRect().top+window.pageYOffset,o=L.getBoundingClientRect().bottom+window.pageYOffset,s=window.getComputedStyle(v).getPropertyValue("height").replace("px",""),l=e+w;l>t?(v.classList.add("fixed"),v.classList.remove("bottom"),v.style.width=S+"px",v.style.top=w+"px",v.style.bottom="auto",o-s<=l&&(v.classList.add("bottom"),v.classList.remove("fixed"),v.style.top="auto",v.style.bottom=0)):(v.classList.remove("fixed"),v.style.top="auto")}})),c.addEventListener("input",(function(){O(),q(),_()})),n.addEventListener("input",(function(){let e=document.querySelectorAll(".cat-page__item-checkbox");if(this.checked)for(let t=0;t<e.length;t++)m(e[t],!0),p(1);else{for(let t=0;t<e.length;t++)m(e[t],!1);p(0)}}));for(let e=0;e<i.length;e++)i[e].addEventListener("input",(function(){C(this)}));function C(e){e.checked?e.closest(".cat-page__item").classList.add("selected"):e.closest(".cat-page__item").classList.remove("selected"),0!=function(){let e=document.querySelectorAll(".cat-page__item-checkbox"),t=[];for(let o=0;o<e.length;o++)e[o].checked&&t.push(e[o]);t.length<e.length?n.checked=!1:t.length==e.length&&0!=e.length&&(n.checked=!0);return t}().length?p(1):p(0)}const k=document.querySelector(".delete-items-btn"),E=$(".overlay");k.addEventListener("click",(function(){!function(){let t=$("#popup-delete");E.fadeIn(),scrollLock.disablePageScroll(),t.fadeIn("400"),t.addClass("animate__slideInRight animate__animated"),t.addClass("active"),e.classList.add("pum-open")}(),$("#popup-delete").addClass("delete-items")}));function O(){let e=L.getBoundingClientRect().top+window.pageYOffset;if(!(Math.max(document.body.scrollTop,document.documentElement.scrollTop)>e-w-1))return!1;window.scrollBy(0,-10);setTimeout(O,2)}document.querySelector(".delete-btn").addEventListener("click",(function(){let e=$("#popup-delete");if(t.classList.contains("cat-page")){if(e.hasClass("delete-items")){let e=document.querySelectorAll(".cat-page__item"),t=document.querySelector(".cat-page__list");for(let o=0;o<e.length;o++)e[o].classList.contains("selected")&&t.removeChild(e[o]);n.checked=!1,document.querySelectorAll(".cat-page__item").length>0?n.classList.remove("disabled"):(n.classList.add("disabled"),d(),o.classList.add("disabled"),u.classList.add("disabled")),p(0),_()}q()}}))}));