window.addEventListener("DOMContentLoaded",(function(e){"use strict";const t=$(".overlay"),n=document.querySelector("html"),c=document.querySelector(".checkout__sidebar_outer"),o=document.querySelector(".checkout__sidebar"),l=window.getComputedStyle(c).getPropertyValue("width").replace("px",""),d=document.querySelector(".checkout__left"),i=document.querySelector(".header"),s=1*window.getComputedStyle(i).getPropertyValue("height").replace("px","");function u(){let e=1*window.getComputedStyle(c).getPropertyValue("height").replace("px","");e<1*window.getComputedStyle(d).getPropertyValue("height").replace("px","")&&window.matchMedia("(min-width: 1025px)").matches&&window.innerHeight-s-10>e?c.classList.add("can-be-fixed"):(c.classList.remove("can-be-fixed","fixed","bottom"),c.style.top="auto",c.style.bottom="auto")}function r(e,t){let n=document.querySelectorAll(".checkout__tab");for(let e=0;e<n.length;e++)n[e].classList.remove("current");let c=n[e];if(c.classList.add("active","current"),"prev"==t){for(let t=0;t<n.length;t++)t>e&&n[t].classList.remove("active");if("step-1"==c.id){document.querySelector(".checkout__tab_goods .checkout__tab-name").classList.add("unfolded")}}$(".checkout__tab-content").each((function(e,t){$(t).closest(".checkout__tab").hasClass("current")?$(t).slideDown():$(t).slideUp()})),$(".checkout__tab-content-filled").each((function(e,t){if($(t).closest(".checkout__tab").hasClass("current")||!$(t).closest(".checkout__tab").hasClass("active"))$(t).slideUp();else{if("step-3"==$(t).closest(".checkout__tab").attr("id")){z(document.querySelector(".buyer_name"),document.querySelector(".buyer_address"),document.querySelector(".buyer_agent"),document.querySelector(".buyer_email"),document.querySelector(".buyer_tel"),document.querySelector(".buyer_message"))}else if("step-4"==$(t).closest(".checkout__tab").attr("id")){z(document.querySelector(".addition_date-1"),document.querySelector(".addition_time-1"),document.querySelector(".addition_date-2"),document.querySelector(".addition_time-2"),document.querySelector(".addition_tk"),document.querySelector(".addition_tk-delivery"),document.querySelector(".addition_tk-message"))}$(t).slideDown()}})),a(),m(),setTimeout((()=>{u()}),300)}function a(){let e=document.querySelectorAll(".checkout__tab-edit");for(let t=0;t<e.length;t++)e[t].closest(".checkout__tab").classList.contains("active")&&!e[t].closest(".checkout__tab").classList.contains("current")?e[t].classList.remove("d-none"):e[t].classList.add("d-none")}function m(){$(".select").removeClass("active"),$(".select__list").slideUp()}function _(){let e=[...document.querySelectorAll("#step-4 select"),...document.querySelectorAll("#step-4 input")];for(let t=0;t<e.length;t++)e[t].closest(".checkout__field").classList.contains("required")?e[t].setAttribute("required","required"):e[t].removeAttribute("required")}u(),window.addEventListener("scroll",(function(){if(c.classList.contains("can-be-fixed")){let e=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement||document.body.parentNode||document.body,t=o.getBoundingClientRect().top+window.pageYOffset,n=d.getBoundingClientRect().bottom+window.pageYOffset,i=window.getComputedStyle(c).getPropertyValue("height").replace("px",""),u=e+s+10;u>t?(c.classList.add("fixed"),c.classList.remove("bottom"),c.style.width=l+"px",c.style.top=s+10+"px",c.style.bottom="auto",n-i<=u&&(c.classList.add("bottom"),c.classList.remove("fixed"),c.style.top="auto",c.style.bottom=0)):(c.classList.remove("fixed"),c.style.top="auto")}})),$(document).on("click",".checkout__tab_goods .checkout__tab-name",(function(){this.classList.toggle("unfolded"),this.classList.contains("unfolded")?$(".checkout__tab_goods .checkout__tab-content").slideDown():$(".checkout__tab_goods .checkout__tab-content").slideUp(),setTimeout((()=>{u()}),300)})),$(document).on("click",".checkout-next-tab",(function(){let e=document.querySelectorAll(".checkout__tab"),n=this.closest(".checkout__tab");if("step-1"==n.id){document.querySelector(".checkout__tab_goods .checkout__tab-name").classList.remove("unfolded")}if(n!=e[e.length-1]){r(Array.prototype.indexOf.call(document.querySelectorAll(".checkout-next-tab"),this)+1,"next")}else{if(document.querySelector("#radio1").checked){f($("#popup-address-confirmation")),t.fadeIn();let e=document.querySelector(".buyer_address");document.querySelector(".address-confirmation__input").value=e.textContent}else F()}})),$(document).on("click",".checkout-prev-tab",(function(){r(Array.prototype.indexOf.call(document.querySelectorAll(".checkout-prev-tab"),this),"prev")})),$(document).on("click",".checkout__tab-edit",(function(){r(Array.prototype.indexOf.call(document.querySelectorAll(".checkout__tab-edit"),this)+1,"curr")})),$(document).on("input",'#step-2 input[type="radio"]',(function(){"radio2"==this.id&&this.checked?function(){let e=document.querySelector(".checkout__field_address");e.classList.add("disabled"),e.classList.remove("required"),document.querySelector(".buyer_address").parentElement.classList.add("d-none","disabled"),$("#step-4 .delivery-method-1").addClass("d-none"),$("#step-4 .delivery-method-1").removeClass("required"),$("#step-4 .delivery-method-3").addClass("d-none"),$("#step-4 .delivery-method-3").removeClass("required"),$("#step-4 .delivery-method-2").removeClass("d-none"),$("#step-4 .delivery-method-2").addClass("required")}():function(){let e=document.querySelector(".checkout__field_address");e.classList.remove("disabled"),e.classList.add("required");let t=document.querySelector(".buyer_address");t.parentElement.classList.remove("disabled"),z(t),$("#step-4 .delivery-method-2").addClass("d-none"),$("#step-4 .delivery-method-2").removeClass("required"),$("#step-4 .delivery-method-3").addClass("d-none"),$("#step-4 .delivery-method-3").removeClass("required"),$("#step-4 .delivery-method-1").removeClass("d-none"),$("#step-4 .delivery-method-1").addClass("required"),L()}(),function(){let e=document.querySelector(".delivery-result"),t=document.querySelectorAll('#step-2 input[type="radio"]');for(let n=0;n<t.length;n++)t[n].checked&&(e.textContent=t[n].nextElementSibling.textContent,"radio2"==t[n].id?e.nextElementSibling.classList.remove("d-none"):e.nextElementSibling.classList.add("d-none"))}(),function(){const e=document.querySelectorAll("#step-3 select");for(let t=0;t<e.length;t++)e[t].closest(".checkout__field").classList.contains("required")?e[t].setAttribute("required","required"):e[t].removeAttribute("required")}(),_()}));const p=document.querySelectorAll(".search-company__input"),h=document.querySelector(".search-company-submit"),y=document.querySelector(".search-company-cansel");function f(e){scrollLock.disablePageScroll(),e.fadeIn("400"),e.addClass("animate__slideInRight animate__animated"),e.addClass("active"),n.classList.add("pum-open")}function g(e){e.addClass("animate__slideOutRight"),e.fadeOut("400"),scrollLock.enablePageScroll(),n.classList.remove("pum-open"),setTimeout((()=>{e.removeClass("animate__slideInRight animate__animated animate__slideOutRight"),e.removeClass("active")}),400)}$(document).on("click",".add-new_company",(function(){f($("#popup-search-company")),t.fadeIn()})),y.addEventListener("click",(function(){document.querySelector("#popup-search-company .popup__close").click(),q(p,h)}));for(let e=0;e<p.length;e++)p[e].addEventListener("input",(function(){v(p,h)}));function v(e,t){let n=!1;for(let t=0;t<e.length;t++)if(""!=e[t].value&&""!=e[t].value.replace(/\s/g,"")){n=!0;break}n?t.classList.remove("disabled"):t.classList.add("disabled")}function q(e,t){for(let t=0;t<e.length;t++)e[t].value="";t.classList.add("disabled")}function S(e,t){for(let n=0;n<e.length;n++)e[n].classList.contains(t)?e[n].classList.remove("d-none"):e[n].classList.add("d-none")}h.addEventListener("click",(function(){let e=this.getAttribute("data-result");"success"==e&&(!function(){let e=document.querySelector('input[name="my_company_name"]').value;if(""!=e&&""!=e.replace(/\s/g,"")){let t=document.querySelector(".checkout__field_company select"),n=document.querySelectorAll(".checkout__field_company option");for(let e=0;e<n.length;e++)n[e].removeAttribute("selected"),n[e].select=!1;let c=document.createElement("option");t.appendChild(c),c.value=e,c.textContent=e,c.select=!0,c.setAttribute("selected","selected");let o=document.querySelector(".checkout__field_company .select"),l=document.querySelector(".checkout__field_company .select__list"),d=document.querySelectorAll(".checkout__field_company .select__item");o.children[0].textContent=e;for(let e=0;e<d.length;e++)d[e].classList.remove("selected");let i=document.createElement("li");l.insertBefore(i,d[d.length-1]),i.classList.add("select__item","selected"),i.textContent=e,i.id=e}}(),Y()),q(p,this),g($("#popup-search-company")),function(e){const t=document.querySelectorAll(".search-company-result__header"),n=document.querySelectorAll(".search-company-result__message");S(t,e),S(n,e)}(e),f($("#popup-search-company-result")),m()}));const k=document.querySelector(".add-address__input"),b=document.querySelector(".add-address-submit"),C=document.querySelector(".add-address-cansel");function L(){let e=N(document.querySelectorAll(".checkout__field_address .select__item"));$("#step-4 .delivery-method-3").addClass("d-none"),$("#step-4 .delivery-method-3").removeClass("required"),$("#step-4 .delivery-method-1").removeClass("d-none"),$("#step-4 .delivery-method-1").addClass("required"),e&&!e.children[0].textContent.match(/новосибирск/i)&&($("#step-4 .delivery-method-1").addClass("d-none"),$("#step-4 .delivery-method-1").removeClass("required"),$("#step-4 .delivery-method-3").removeClass("d-none"),$("#step-4 .delivery-method-3").addClass("required"))}$(document).on("click",".add-new_address",(function(){f($("#popup-add-address")),t.fadeIn(),k.focus()})),C.addEventListener("click",(function(){document.querySelector("#popup-add-address .popup__close").click(),q([k],b)})),k.addEventListener("input",(function(){v([k],b)})),b.addEventListener("click",(function(){"success"==this.getAttribute("data-result")?(!function(){let e=k.value,t=document.querySelector(".checkout__field_address select"),n=document.querySelectorAll(".checkout__field_address option");for(let e=0;e<n.length;e++)n[e].removeAttribute("selected"),n[e].select=!1;let c=document.createElement("option");t.appendChild(c),c.value=e,c.textContent=e,c.select=!0,c.setAttribute("selected","selected");let o=document.querySelector(".checkout__field_address .select"),l=document.querySelector(".checkout__field_address .select__list"),d=document.querySelectorAll(".checkout__field_address .select__item");o.children[0].textContent=e;for(let e=0;e<d.length;e++)d[e].classList.remove("selected");let i=document.createElement("li");l.insertBefore(i,d[d.length-1]),i.classList.add("select__item","selected"),i.id=e;let s=document.createElement("p");i.appendChild(s),s.textContent=e,i.innerHTML+='<button type="button" class="icon-btn edit-address-btn"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_614_12399)"><path d="M0.567851 23.9395L0.567531 23.9395C0.554698 23.9427 0.546699 23.9415 0.540916 23.9398C0.533836 23.9377 0.525383 23.9332 0.517496 23.9254C0.50959 23.9176 0.504571 23.9088 0.50211 23.9009C0.500029 23.8943 0.498839 23.8857 0.501682 23.8729L1.53682 19.2219L5.14308 22.8302L0.567851 23.9395ZM3.27548 16.9023L14.9238 5.25139L19.0988 9.42634L7.44798 21.0772L3.27548 16.9023ZM20.9797 1.5431L23.157 3.72035C23.6143 4.17769 23.6143 4.91359 23.157 5.371C23.157 5.371 23.157 5.371 23.157 5.37101L21.0778 7.45016L16.9028 3.27513L18.6342 1.5437C18.6344 1.54355 18.6345 1.5434 18.6347 1.54325C19.2842 0.8964 20.334 0.897407 20.9797 1.5431Z" stroke="#BBBBBB"></path></g><defs><clipPath id="clip0_614_12399"><rect width="24" height="24" fill="white" transform="translate(0 0.5)"></rect></clipPath></defs></svg></button>'}(),H(),L(),_(),t.fadeOut()):f($("#popup-add-address-result")),q([k],this),g($("#popup-add-address")),m()}));const x=document.querySelector(".edit-address-submit"),A=document.querySelector(".edit-address-cansel"),w=document.querySelector(".edit-address__input");$(document).on("click",".edit-address-btn",(function(){var e;f($("#popup-edit-address")),t.fadeIn(),e=this,w.value=e.previousElementSibling.textContent,w.focus(),x.classList.remove("disabled")})),w.addEventListener("input",(function(){v([w],x)})),A.addEventListener("click",(function(){document.querySelector("#popup-edit-address .popup__close").click(),q([w],x)})),x.addEventListener("click",(function(){"success"==this.getAttribute("data-result")?(!function(){let e=w.value,t=document.querySelectorAll(".checkout__field_address option");for(let n=0;n<t.length;n++)"selected"==t[n].getAttribute("selected")&&(t[n].value=e,t[n].textContent=e);let n=document.querySelector(".checkout__field_address .select"),c=document.querySelectorAll(".checkout__field_address .select__item");n.children[0].textContent=e;for(let t=0;t<c.length;t++)c[t].classList.contains("selected")&&(c[t].children[0].textContent=e,c[t].id=e)}(),H(),L(),_(),t.fadeOut()):f($("#popup-add-address-result")),q([w],x),g($("#popup-edit-address")),m()}));const E=document.querySelectorAll(".add-agent__input"),B=document.querySelector(".add-agent-submit"),O=document.querySelector(".add-agent-cansel"),P=document.querySelector('.add-agent input[name="my_fio"]'),M=document.querySelector('.add-agent input[name="my_email"]'),I=document.querySelector('.add-agent input[name="my_tel"]');$(document).on("click",".add-new_agent",(function(){f($("#popup-add-agent")),t.fadeIn()}));for(let e=0;e<E.length;e++)E[e].addEventListener("input",(function(){v(E,B)}));O.addEventListener("click",(function(){document.querySelector("#popup-add-agent .popup__close").click(),q(E,B)})),B.addEventListener("click",(function(e){e.preventDefault(),"success"==this.getAttribute("data-result")?(!function(){let e=P.value,t=M.value,n=I.value,c=document.querySelector(".checkout__field_agent select"),o=document.querySelectorAll(".checkout__field_agent option");for(let e=0;e<o.length;e++)o[e].removeAttribute("selected"),o[e].select=!1;let l=document.createElement("option");c.appendChild(l),l.value=e,l.textContent=e,l.select=!0,l.setAttribute("selected","selected");let d=document.querySelector(".checkout__field_agent .select"),i=document.querySelector(".checkout__field_agent .select__list"),s=document.querySelectorAll(".checkout__field_agent .select__item");d.children[0].textContent=e;for(let e=0;e<s.length;e++)s[e].classList.remove("selected");let u=document.createElement("li");i.insertBefore(u,s[s.length-1]),u.classList.add("select__item","selected"),u.setAttribute("data-email",t),u.setAttribute("data-tel",n),u.id=e;let r=document.createElement("p");u.appendChild(r),r.textContent=e,u.innerHTML+='<button type="button" class="icon-btn edit-agent-btn"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_614_12399)"><path d="M0.567851 23.9395L0.567531 23.9395C0.554698 23.9427 0.546699 23.9415 0.540916 23.9398C0.533836 23.9377 0.525383 23.9332 0.517496 23.9254C0.50959 23.9176 0.504571 23.9088 0.50211 23.9009C0.500029 23.8943 0.498839 23.8857 0.501682 23.8729L1.53682 19.2219L5.14308 22.8302L0.567851 23.9395ZM3.27548 16.9023L14.9238 5.25139L19.0988 9.42634L7.44798 21.0772L3.27548 16.9023ZM20.9797 1.5431L23.157 3.72035C23.6143 4.17769 23.6143 4.91359 23.157 5.371C23.157 5.371 23.157 5.371 23.157 5.37101L21.0778 7.45016L16.9028 3.27513L18.6342 1.5437C18.6344 1.54355 18.6345 1.5434 18.6347 1.54325C19.2842 0.8964 20.334 0.897407 20.9797 1.5431Z" stroke="#BBBBBB"></path></g><defs><clipPath id="clip0_614_12399"><rect width="24" height="24" fill="white" transform="translate(0 0.5)"></rect></clipPath></defs></svg></button>'}(),j(),t.fadeOut()):f($("#popup-add-agent-result")),q(E,this),g($("#popup-add-agent")),m()}));const D=document.querySelector(".edit-agent-submit"),R=document.querySelector(".edit-agent-cansel"),Z=document.querySelectorAll(".edit-agent__input"),T=document.querySelector('.edit-agent input[name="my_fio"]'),V=document.querySelector('.edit-agent input[name="my_email"]'),U=document.querySelector('.edit-agent input[name="my_tel"]');$(document).on("click",".edit-agent-btn",(function(){f($("#popup-edit-agent")),t.fadeIn(),function(e){let t=e.closest(".select__item");T.value=t.children[0].textContent,T.focus(),V.value=t.getAttribute("data-email"),U.value=t.getAttribute("data-tel"),D.classList.remove("disabled")}(this)}));for(let e=0;e<Z.length;e++)Z[e].addEventListener("input",(function(){v(Z,D)}));function Y(){let e=document.querySelectorAll(".checkout__field_company .select__item");document.querySelector(".buyer_name").textContent=N(e).textContent}function H(){let e=document.querySelectorAll(".checkout__field_address .select__item");document.querySelector(".buyer_address").textContent=N(e).children[0].textContent}function j(){let e=N(document.querySelectorAll(".checkout__field_agent .select__item"));document.querySelector(".buyer_agent").textContent=e.children[0].textContent;let t=document.querySelector('#step-3 input[name="email"]'),n=document.querySelector('#step-3 input[name="tel"]');t.value=e.getAttribute("data-email"),n.value=e.getAttribute("data-tel");let c=document.querySelector(".buyer_email"),o=document.querySelector(".buyer_tel");c.textContent=t.value,o.textContent=n.value}function N(e){for(let t=0;t<e.length;t++)if(e[t].classList.contains("selected"))return e[t]}function z(...e){for(let t=0;t<e.length;t++)""!=e[t].textContent&&""!=e[t].textContent.replace(/\s/g,"")?e[t].parentElement.classList.contains("disabled")||e[t].parentElement.classList.remove("d-none"):e[t].parentElement.classList.add("d-none")}R.addEventListener("click",(function(){document.querySelector("#popup-edit-agent .popup__close").click(),q(Z,D)})),D.addEventListener("click",(function(e){e.preventDefault(),"success"==this.getAttribute("data-result")?(!function(){let e=T.value,t=V.value,n=U.value,c=document.querySelectorAll(".checkout__field_agent option");for(let t=0;t<c.length;t++)"selected"==c[t].getAttribute("selected")&&(c[t].value=e,c[t].textContent=e);let o=document.querySelector(".checkout__field_agent .select"),l=document.querySelectorAll(".checkout__field_agent .select__item");o.children[0].textContent=e;for(let c=0;c<l.length;c++)l[c].classList.contains("selected")&&(l[c].children[0].textContent=e,l[c].setAttribute("data-email",t),l[c].setAttribute("data-tel",n),l[c].id=e)}(),j(),t.fadeOut()):f($("#popup-add-agent-result")),q(Z,D),g($("#popup-edit-agent")),m()})),$(document).on("click",".checkout__field_company .select__item",(function(){Y()})),$(document).on("click",".checkout__field_address .select__item",(function(){this.classList.contains("add-new")||(H(),L(),_())})),$(document).on("click",".checkout__field_agent .select__item",(function(){this.classList.contains("add-new")||j()})),$(document).on("change",'#step-3 input[name="message"]',(function(){document.querySelector(".buyer_message").textContent=this.value})),$(document).on("change",'#step-4 input[name="date2"]',(function(){document.querySelector(".addition_date-1").textContent=this.value.split("-").reverse().join(".")})),$(document).on("change",'#step-4 input[name="date1"]',(function(){document.querySelector(".addition_date-2").textContent=this.value.split("-").reverse().join(".")})),$(document).on("click",".checkout__field_time .select__item",(function(){!function(){let e=document.querySelectorAll(".checkout__field_time .select__item"),t=document.querySelector(".addition_time-1"),n=document.querySelector(".addition_time-2");t.textContent=N(e).textContent,n.textContent=N(e).textContent}()})),$(document).on("click",".checkout__field_tk .select__item",(function(){!function(){let e=document.querySelectorAll(".checkout__field_tk .select__item");document.querySelector(".addition_tk").textContent=N(e).textContent}()})),$(document).on("click",".checkout__field_tk-delivery .select__item",(function(){!function(){let e=document.querySelectorAll(".checkout__field_tk-delivery .select__item");document.querySelector(".addition_tk-delivery").textContent=N(e).textContent}()})),$(document).on("change",'#step-4 input[name="message1"]',(function(){document.querySelector(".addition_tk-message").textContent=this.value}));function F(){let e=window.location.host,t=window.location.protocol+"//";window.location.href=t+e+"/order-ready-1.html"}document.querySelector(".confirmation-btn").addEventListener("click",(function(){F()}));document.querySelector(".address-confirmation-cansel").addEventListener("click",(function(){g($("#popup-address-confirmation")),t.fadeOut(),document.querySelector("#step-3 .checkout__tab-edit").click()}))}));