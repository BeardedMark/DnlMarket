window.addEventListener("DOMContentLoaded",(function(){"use strict";const e=$(".overlay"),t=document.querySelector("body"),n=document.querySelector("html"),o=document.querySelector(".header"),l=1*window.getComputedStyle(o).getPropertyValue("height").replace("px",""),c=document.querySelector(".personal__left"),s=document.querySelector(".personal__sidebar_outer"),a=document.querySelector(".personal__sidebar"),i=window.getComputedStyle(s).getPropertyValue("width").replace("px","");function r(){let e=1*window.getComputedStyle(s).getPropertyValue("height").replace("px","");e<1*window.getComputedStyle(c).getPropertyValue("height").replace("px","")&&window.matchMedia("(min-width: 1025px)").matches&&window.innerHeight-l-10>e?s.classList.add("can-be-fixed"):(s.classList.remove("can-be-fixed"),s.classList.remove("fixed"),s.classList.remove("bottom"),s.style.top="auto",s.style.bottom="auto")}r(),window.addEventListener("scroll",(function(){if(s.classList.contains("can-be-fixed")){let e=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement||document.body.parentNode||document.body,t=a.getBoundingClientRect().top+window.pageYOffset,n=c.getBoundingClientRect().bottom+window.pageYOffset,o=window.getComputedStyle(s).getPropertyValue("height").replace("px",""),r=e+l+20;r>t?(s.classList.add("fixed"),s.classList.remove("bottom"),s.style.width=i+"px",s.style.top=l+20+"px",s.style.bottom="auto",n-o<=r&&(s.classList.add("bottom"),s.classList.remove("fixed"),s.style.top="auto",s.style.bottom=0)):(s.classList.remove("fixed"),s.style.top="auto")}}));function d(e){scrollLock.disablePageScroll(),e.fadeIn("400"),e.addClass("animate__slideInRight animate__animated"),e.addClass("active"),n.classList.add("pum-open")}function u(e){e.addClass("animate__slideOutRight"),e.fadeOut("400"),scrollLock.enablePageScroll(),n.classList.remove("pum-open"),setTimeout((()=>{e.removeClass("animate__slideInRight animate__animated animate__slideOutRight"),e.removeClass("active")}),400)}function p(e){!function(e){e.scrollHeight>e.offsetHeight?e.classList.add("scrollable"):e.classList.remove("scrollable")}(e)}document.querySelector(".personal-menu-btn").addEventListener("click",(function(){d($("#popup-personal-menu")),e.fadeIn(),scrollLock.addScrollableSelector(".popup .wrapper"),p(document.querySelector("#popup-personal-menu .wrapper"))}));const m=document.querySelectorAll(".personal__sidebar .personal__link"),h=document.querySelectorAll(".personal-menu .personal__link");for(let e=0;e<m.length;e++)m[e].classList.contains("current")&&h[e].classList.add("current");function _(e){document.querySelector(".user-name").textContent=e.name,document.querySelector(".user-phone").textContent=e.phone,document.querySelector(".user-email").textContent=e.email}function y(e,t){for(let t=0;t<e.length;t++)e[t].classList.remove("active");t.classList.add("active")}$(document).on("click",".user-select-btn",(function(){d($("#popup-select-user")),e.fadeIn(),scrollLock.addScrollableSelector(".popup .wrapper__inner"),p(document.querySelector("#popup-select-user .wrapper__inner"))})),$(document).on("click",".select-user__item",(function(){y(document.querySelectorAll(".select-user__item"),this),document.querySelector("#popup-select-user .popup__close").click(),_({name:this.getAttribute("data-user-name"),phone:this.getAttribute("data-user-phone"),email:this.getAttribute("data-user-email")})}));const f=document.querySelectorAll(".add-agent__input"),g=document.querySelector(".add-agent-submit"),v=document.querySelector(".add-agent-cansel"),b=document.querySelector('.add-agent input[name="my_fio"]'),S=document.querySelector('.add-agent input[name="my_email"]'),L=document.querySelector('.add-agent input[name="my_tel"]');$(document).on("click",".add-user-btn",(function(){u($("#popup-select-user")),d($("#popup-add-agent")),"none"==e.css("display")&&e.fadeIn()}));for(let e=0;e<f.length;e++)f[e].addEventListener("input",(function(){q(f,g)}));function w(e,t){for(let t=0;t<e.length;t++)e[t].value="";t.classList.add("disabled")}function q(e,t){let n=!1;for(let t=0;t<e.length;t++)if(""!=e[t].value&&""!=e[t].value.replace(/\s/g,"")){n=!0;break}n?t.classList.remove("disabled"):t.classList.add("disabled")}function x(e){document.querySelector(".company-name").textContent=e.name,document.querySelector(".company-inn").textContent=e.inn}v.addEventListener("click",(function(){document.querySelector("#popup-add-agent .popup__close").click(),w(f,g)})),g.addEventListener("click",(function(n){n.preventDefault(),"success"==this.getAttribute("data-result")?(t.classList.contains("users-page")?(!function(){let e=document.querySelector(".users__items"),t={name:b.value,phone:S.value,email:L.value};e.innerHTML+='<div class="col col-12 users__item"><div class="col-inner"><div class="users__photo default"><div class="img"><div class="image-cover"><img src="" alt=""></div><div class="users__default-photo"><svg width="26" height="27" viewBox="0 0 26 27" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1941_8808)"><circle cx="13" cy="6.5" r="5.5" stroke="#BBBBBB"></circle><rect x="2.5" y="16" width="21" height="9" rx="4.5" stroke="#BBBBBB"></rect></g><defs><clipPath id="clip0_1941_8808"><rect width="26" height="26" fill="white" transform="translate(0 0.5)"></rect></clipPath></defs></svg></div></div><div class="add-photo-btn"><form action=""><input type="file" name="" id=""><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12.5" cy="12.5" r="12.5" fill="#F4F5F6"></circle><rect x="12" y="6" width="1" height="13" fill="#1B1B1B"></rect><rect x="19" y="12" width="1" height="13" transform="rotate(90 19 12)" fill="#1B1B1B"></rect></svg></form></div></div><div class="users__info"><div class="users__name"><h4 class="user-name">'+t.name+'</h4><button type="button" class="icon-btn edit-user-btn"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_614_12399)"><path d="M0.567851 23.9395L0.567531 23.9395C0.554698 23.9427 0.546699 23.9415 0.540916 23.9398C0.533836 23.9377 0.525383 23.9332 0.517496 23.9254C0.50959 23.9176 0.504571 23.9088 0.50211 23.9009C0.500029 23.8943 0.498839 23.8857 0.501682 23.8729L1.53682 19.2219L5.14308 22.8302L0.567851 23.9395ZM3.27548 16.9023L14.9238 5.25139L19.0988 9.42634L7.44798 21.0772L3.27548 16.9023ZM20.9797 1.5431L23.157 3.72035C23.6143 4.17769 23.6143 4.91359 23.157 5.371C23.157 5.371 23.157 5.371 23.157 5.37101L21.0778 7.45016L16.9028 3.27513L18.6342 1.5437C18.6344 1.54355 18.6345 1.5434 18.6347 1.54325C19.2842 0.8964 20.334 0.897407 20.9797 1.5431Z" stroke="#BBBBBB"></path></g><defs><clipPath id="clip0_614_12399"><rect width="24" height="24" fill="white" transform="translate(0 0.5)"></rect></clipPath></defs></svg></button></div><p><span>Телефон:</span> <span class="user-phone">'+t.phone+'</span></p><p><span>E-mail:</span> <span class="user-email">'+t.email+'</span></p></div><div class="users__delete"><button class="button is-link user-delete-btn"><span>Удалить пользователя</span><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_614_12378)"><path d="M6.66669 24C5.46945 24 4.5 23.0305 4.5 21.8333V6.33331H19.5V21.8333C19.5 23.0305 18.5305 24 17.3334 24H6.66669Z" stroke="#BBBBBB"></path><path d="M16.3125 2.18687L16.4589 2.33331H16.666H20.8326V4H3.16602V2.33331H7.33264H7.53974L7.68619 2.18687L8.87312 1H15.1255L16.3125 2.18687Z" stroke="#BBBBBB"></path></g><defs><clipPath id="clip0_614_12378"><rect width="24" height="24" fill="white" transform="translate(0 0.5)"></rect></clipPath></defs></svg></button></div></div></div>'}(),I(),r()):_({name:b.value,phone:S.value,email:L.value}),e.fadeOut()):d($("#popup-add-agent-result")),w(f,this),u($("#popup-add-agent"))})),$(document).on("click",".company-select-btn",(function(){d($("#popup-select-company")),e.fadeIn(),scrollLock.addScrollableSelector(".popup .wrapper__inner"),p(document.querySelector("#popup-select-company .wrapper__inner"))})),$(document).on("click",".select-company__item",(function(){y(document.querySelectorAll(".select-company__item"),this),document.querySelector("#popup-select-company .popup__close").click(),x({name:this.getAttribute("data-company-name"),inn:this.getAttribute("data-company-inn")})}));const B=document.querySelectorAll(".search-company__input"),A=document.querySelector(".search-company-submit"),k=document.querySelector(".search-company-cansel");$(document).on("click",".add-company-btn",(function(){u($("#popup-select-company")),d($("#popup-search-company")),"none"==e.css("display")&&e.fadeIn()})),k.addEventListener("click",(function(){document.querySelector("#popup-search-company .popup__close").click(),w(B,A)}));for(let e=0;e<B.length;e++)B[e].addEventListener("input",(function(){q(B,A)}));function C(e,t){for(let n=0;n<e.length;n++)e[n].classList.contains(t)?e[n].classList.remove("d-none"):e[n].classList.add("d-none")}A.addEventListener("click",(function(){let e=this.getAttribute("data-result");"success"==e&&(t.classList.contains("companies-page")?(!function(){let e=document.querySelector(".companies__items"),t={name:document.querySelector('input[name="my_company_name"]').value,inn:document.querySelector('input[name="my_company_inn"]').value};e.innerHTML+='<div class="col col-12 companies__item"><div class="col-inner"><div class="companies__top"><div class="companies__name"><h3>'+t.name+'</h3><svg width="27" height="16" viewBox="0 0 27 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26 15L13.5 1L1 15" stroke="#1B1B1B"/></svg></div><div class="companies__edit"><button class="button is-link companies-edit-btn"><span>Редактировать</span><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_614_12399)"><path d="M0.567851 23.9395L0.567531 23.9395C0.554698 23.9427 0.546699 23.9415 0.540916 23.9398C0.533836 23.9377 0.525383 23.9332 0.517496 23.9254C0.50959 23.9176 0.504571 23.9088 0.50211 23.9009C0.500029 23.8943 0.498839 23.8857 0.501682 23.8729L1.53682 19.2219L5.14308 22.8302L0.567851 23.9395ZM3.27548 16.9023L14.9238 5.25139L19.0988 9.42634L7.44798 21.0772L3.27548 16.9023ZM20.9797 1.5431L23.157 3.72035C23.6143 4.17769 23.6143 4.91359 23.157 5.371C23.157 5.371 23.157 5.371 23.157 5.37101L21.0778 7.45016L16.9028 3.27513L18.6342 1.5437C18.6344 1.54355 18.6345 1.5434 18.6347 1.54325C19.2842 0.8964 20.334 0.897407 20.9797 1.5431Z" stroke="#BBBBBB"/></g><defs><clipPath id="clip0_614_12399"><rect width="24" height="24" fill="white" transform="translate(0 0.5)"/></clipPath></defs></svg></button></div></div><div class="companies__bottom"><div class="companies__descr"><p><span>ИНН: </span><span class="company-inn">'+t.inn+'</span></p><p class="d-none"><span>Фактический адрес: </span><span class="company-address"></span></p><p class="d-none"><span>Телефон: </span><span class="company-phone"></span></p><p class="d-none"><span>E-mail: </span><span class="company-email"></span></p></div><div class="companies__addresses"><div class="companies__addresses-title"><h4>Адреса доставки</h4><div class="companies__add-address"><button class="button is-link companies-add-address-btn"><span>Добавить адрес</span><span>Добавить</span></button></div></div><table class="companies__table d-none"><thead><tr><th>Адрес</th><th>Кол-во контактов</th><th>Часы работы</th><th>Часы приемки</th><th>Перерыв</th><th></th></tr></thead><tbody></tbody></table></div></div></div></div>'}(),I(),r()):x({name:document.querySelector('input[name="my_company_name"]').value,inn:document.querySelector('input[name="my_company_inn"]').value})),w(B,this),u($("#popup-search-company")),function(e){const t=document.querySelectorAll(".search-company-result__header"),n=document.querySelectorAll(".search-company-result__message");C(t,e),C(n,e)}(e),d($("#popup-search-company-result"))}));const E=document.querySelector(".personal__options");let H,M,P;function I(){let e;t.classList.contains("users-page")?e=document.querySelectorAll(".users__item"):t.classList.contains("companies-page")&&(e=document.querySelectorAll(".companies__item")),e.length>=2?E.classList.add("can-be-fixed"):(E.classList.remove("can-be-fixed"),E.classList.remove("fixed"),E.classList.remove("bottom"),E.style.top="auto",E.style.bottom="auto",c.style.paddingTop=0)}E&&(I(),H=1*window.getComputedStyle(E).getPropertyValue("height").replace("px",""),M=1*window.getComputedStyle(E).getPropertyValue("width").replace("px",""),P=E.closest(".col-inner")),window.addEventListener("scroll",(function(){if(E&&E.classList.contains("can-be-fixed")){let e=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement||document.body.parentNode||document.body,n=c.getBoundingClientRect().top+window.pageYOffset,o=P.getBoundingClientRect().bottom+e,s=function(){let e;return t.classList.contains("users-page")?e=document.querySelectorAll(".users__item"):t.classList.contains("companies-page")&&(e=document.querySelectorAll(".companies__item")),e[e.length-2]}().getBoundingClientRect().bottom+e,a=o-s,i=e+l+30;i>=n?(E.classList.add("fixed"),E.classList.remove("bottom"),E.style.top=l+30+"px",E.style.bottom="auto",E.style.width=M+"px",c.style.paddingTop=H+"px",s-H+1<=i&&(E.classList.remove("fixed"),E.classList.add("bottom"),E.style.top="auto",E.style.bottom=a+"px")):(E.classList.remove("fixed"),E.style.top="auto",E.style.bottom="auto",c.style.paddingTop=0)}}));const R=document.querySelector("#popup-delete .delete-btn");let O,T;$(document).on("click",".user-delete-btn",(function(){d($("#popup-delete")),e.fadeIn(),O=this.closest(".users__item")})),R.addEventListener("click",(function(){document.querySelector(".users__items").removeChild(O),I(),r()})),$(document).on("click",".edit-user-btn",(function(){d($("#popup-edit-agent")),e.fadeIn(),T=this.closest(".users__item"),function(e){let t=document.querySelectorAll(".user-name"),n=document.querySelectorAll(".user-phone"),o=document.querySelectorAll(".user-email");for(let e=0;e<t.length;e++)t[e].closest(".users__item")==T&&(Y.value=t[e].textContent,F.value=n[e].textContent,j.value=o[e].textContent);D.classList.remove("disabled")}()}));const D=document.querySelector(".edit-agent-submit"),Z=document.querySelector(".edit-agent-cansel"),V=document.querySelectorAll(".edit-agent__input"),Y=document.querySelector('.edit-agent input[name="my_fio"]'),j=document.querySelector('.edit-agent input[name="my_email"]'),F=document.querySelector('.edit-agent input[name="my_tel"]');for(let e=0;e<V.length;e++)V[e].addEventListener("input",(function(){q(V,D)}));Z.addEventListener("click",(function(){document.querySelector("#popup-edit-agent .popup__close").click(),w(V,D)})),D.addEventListener("click",(function(t){t.preventDefault(),"success"==this.getAttribute("data-result")?(!function(){let e=Y.value,t=F.value,n=j.value,o={name:e,phone:t,email:n},l=document.querySelectorAll(".user-name"),c=document.querySelectorAll(".user-phone"),s=document.querySelectorAll(".user-email");for(let e=0;e<l.length;e++)l[e].closest(".users__item")==T&&(l[e].textContent=o.name,c[e].textContent=o.phone,s[e].textContent=o.email)}(),I(),r(),e.fadeOut()):d($("#popup-add-agent-result")),w(V,D),u($("#popup-edit-agent"))})),$(document).on("click",".companies__name",(function(){this.classList.toggle("active");let e=this,t=e.closest(".companies__item");$(".companies__bottom").each((function(n,o){o.closest(".companies__item")==t&&(e.classList.contains("active")?$(o).slideDown():$(o).slideUp())})),setTimeout((()=>{I(),r()}),400)}));const N=document.querySelector(".edit-company-cansel"),U=document.querySelector(".edit-company-submit"),W=document.querySelectorAll(".edit-company__input"),z=document.querySelector('.edit-company input[name="my_address"]'),G=document.querySelector('.edit-company input[name="my_email"]'),J=document.querySelector('.edit-company input[name="my_tel"]');let K;function Q(e,t,n,o){for(let l=0;l<e.length;l++)if(e[l].closest(n)==o){t.value=e[l].textContent;break}}$(document).on("click",".companies-edit-btn",(function(){d($("#popup-edit-company")),e.fadeIn(),K=this.closest(".companies__item"),Q(document.querySelectorAll(".company-address"),z,".companies__item",K),Q(document.querySelectorAll(".company-email"),G,".companies__item",K),Q(document.querySelectorAll(".company-phone"),J,".companies__item",K),q(W,U)})),N.addEventListener("click",(function(){document.querySelector("#popup-edit-company .popup__close").click(),w(W,U)}));for(let e=0;e<W.length;e++)W[e].addEventListener("input",(function(){q(W,U)}));U.addEventListener("click",(function(t){t.preventDefault(),function(e){for(let t=0;t<W.length;t++)for(let n=0;n<e.length;n++){let o=e[n];for(let e=0;e<o.length;e++)o[e].closest(".companies__item")==K&&(o[e].classList.contains("company-address")&&"my_address"==W[t].getAttribute("name")||o[e].classList.contains("company-email")&&"my_email"==W[t].getAttribute("name")||o[e].classList.contains("company-phone")&&"my_tel"==W[t].getAttribute("name"))&&(o[e].textContent=W[t].value)}}([document.querySelectorAll(".company-address"),document.querySelectorAll(".company-email"),document.querySelectorAll(".company-phone")]),function(e){for(let t=0;t<e.length;t++)""!=e[t].textContent&&""!=e[t].textContent.replace(/\s/g,"")?e[t].closest("p").classList.remove("d-none"):""!=e[t].textContent&&""!=e[t].textContent.replace(/\s/g,"")||e[t].closest("p").classList.add("d-none")}([...document.querySelectorAll(".company-address"),...document.querySelectorAll(".company-email"),...document.querySelectorAll(".company-phone")]),I(),r(),w(W,U),u($("#popup-edit-company")),e.fadeOut()}));const X=document.querySelectorAll(".add-delivery-info__input"),ee=document.querySelector('.add-delivery-info input[name="my_delivery_address"]'),te=document.querySelector('.add-delivery-info input[name="my_office_hours"]'),ne=document.querySelector('.add-delivery-info input[name="my_receipt_hours"]'),oe=document.querySelector('.add-delivery-info input[name="my_break_hours"]'),le=document.querySelector(".add-delivery-info-submit"),ce=document.querySelector(".add-delivery-info-cansel");let se,ae;$(document).on("click",".companies-add-address-btn",(function(){e.fadeIn(),d($("#popup-add-delivery-info")),scrollLock.addScrollableSelector(".popup .wrapper__inner"),p(document.querySelector("#popup-add-delivery-info .wrapper__inner")),se=this.closest(".companies__item"),le.setAttribute("data-use","add"),w(X,le)}));for(let e=0;e<X.length;e++)X[e].addEventListener("input",(function(){q(X,le)}));function ie(e){0==e.querySelector("tbody").querySelectorAll("tr").length?e.classList.add("d-none"):e.classList.remove("d-none")}ce.addEventListener("click",(function(){document.querySelector("#popup-add-delivery-info .popup__close").click(),w(X,le)})),le.addEventListener("click",(function(t){if(t.preventDefault(),"success"==this.getAttribute("data-result")){if("add"==this.getAttribute("data-use")){!function(){let e=document.querySelectorAll(".companies__addresses tbody"),t={address:ee.value,officeHours:te.value,receiptHours:ne.value,breakHours:oe.value};for(let n=0;n<e.length;n++)e[n].closest(".companies__item")==se&&(e[n].innerHTML+='<tr class="companies__main-tr"><td class="table-address"><span>'+t.address+'</span><div class="table-address__arrow"><svg width="13" height="8" viewBox="0 0 13 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0.5L6.5 6.5L12 0.500002" stroke="#1B1B1B"/></svg></div></td><td class="table-amount-contacts">0</td><td class="table-office-hours">'+t.officeHours+'</td><td class="table-receipt-hours">'+t.receiptHours+'</td><td class="table-break-hours">'+t.breakHours+'</td><td><div><button type="button" class="icon-btn company-delivery-address-edit"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_3484_16629)"><path d="M2.84739 13.6687L12.4365 4.07745L15.7978 7.43872L6.20667 17.0299L2.84739 13.6687ZM4.12208 18.5625L0.512291 19.4378L1.32905 15.7679L4.12208 18.5625ZM17.4242 0.928276L19.2386 2.74265C19.5871 3.09122 19.5872 3.65171 19.2386 4.00034C19.2386 4.00034 19.2385 4.00035 19.2385 4.00035L17.5648 5.67405L14.2035 2.31271L15.5873 0.928875C15.5875 0.928717 15.5876 0.928559 15.5878 0.928401C16.0966 0.421816 16.9187 0.422833 17.4242 0.928276Z" stroke="#BBBBBB"></path></g><defs><clipPath id="clip0_3484_16629"><rect width="20" height="20" fill="white"></rect></clipPath></defs></svg></button><button type="button" class="icon-btn company-delivery-address-delete"><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6.36328" y="7.13623" width="0.999999" height="19" transform="rotate(-45 6.36328 7.13623)" fill="#BBBBBB"></rect><rect x="19.7988" y="6.42871" width="1" height="19" transform="rotate(45 19.7988 6.42871)" fill="#BBBBBB"></rect></svg></button></div></td></tr><tr class="companies__sub-tr"><td colspan="6"><table class="companies__table-inner"><thead><tr><th>Контакты</th><th colspan="2"><div class="companies__add-contacts"><button class="button is-link companies-add-contacts-btn"><span>Добавить контакт</span><span>Добавить</span></button></div></th></tr></thead><tbody></tbody></table></td></tr>')}();let e=document.querySelectorAll(".companies__table");for(let t=0;t<e.length;t++)e[t].closest(".companies__item")==se&&ie(e[t])}else"replace"==this.getAttribute("data-use")&&function(){let e=document.querySelectorAll(".table-address span"),t=document.querySelectorAll(".table-office-hours"),n=document.querySelectorAll(".table-receipt-hours"),o=document.querySelectorAll(".table-break-hours"),l={address:ee.value,officeHours:te.value,receiptHours:ne.value,breakHours:oe.value};for(let c=0;c<e.length;c++)e[c].closest("tr")==ae&&(e[c].textContent=l.address,console.log(l.address),t[c].textContent=l.officeHours,n[c].textContent=l.receiptHours,o[c].textContent=l.breakHours)}();I(),r(),e.fadeOut()}else d($("#popup-add-address-result"));w(X,this),u($("#popup-add-delivery-info"))})),$(document).on("click",".company-delivery-address-delete",(function(){let e=this.closest("table"),t=this.closest("tbody"),n=this.closest("tr"),o=n.nextElementSibling;t.removeChild(n),t.removeChild(o),ie(e),I(),r()})),$(document).on("click",".company-delivery-address-edit",(function(){e.fadeIn(),d($("#popup-add-delivery-info")),scrollLock.addScrollableSelector(".popup .wrapper__inner"),p(document.querySelector("#popup-add-delivery-info .wrapper__inner")),ae=this.closest("tr"),Q(document.querySelectorAll(".table-address span"),ee,"tr",ae),Q(document.querySelectorAll(".table-office-hours"),te,"tr",ae),Q(document.querySelectorAll(".table-receipt-hours"),ne,"tr",ae),Q(document.querySelectorAll(".table-break-hours"),oe,"tr",ae),q(X,le),le.setAttribute("data-use","replace")})),$(document).on("click",".table-address",(function(){this.classList.toggle("is-active"),this.closest(".companies__main-tr").nextElementSibling.classList.toggle("is-visible")}));const re=document.querySelectorAll(".add-contact-address__input"),de=document.querySelector('.add-contact-address input[name="my_fio"]'),ue=document.querySelector('.add-contact-address input[name="my_tel"]'),pe=document.querySelector(".add-contact-address-submit"),me=document.querySelector(".add-contact-address-cansel");let he;$(document).on("click",".companies-add-contacts-btn",(function(){e.fadeIn(),d($("#popup-add-contact-address")),he=this.closest(".companies__sub-tr")}));for(let e=0;e<re.length;e++)re[e].addEventListener("input",(function(){q(re,pe)}));me.addEventListener("click",(function(){document.querySelector("#popup-add-contact-address .popup__close").click(),w(re,pe)})),pe.addEventListener("click",(function(t){t.preventDefault(),function(){let e=document.querySelectorAll(".companies__table-inner tbody"),t={name:de.value,tel:ue.value};for(let n=0;n<e.length;n++)e[n].closest(".companies__sub-tr")==he&&(e[n].innerHTML+='<tr><td class="contact-name">'+t.name+'</td><td class="contact-tel">'+t.tel+'</td><td><div><button type="button" class="icon-btn company-contact-edit"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_3484_16629)"><path d="M2.84739 13.6687L12.4365 4.07745L15.7978 7.43872L6.20667 17.0299L2.84739 13.6687ZM4.12208 18.5625L0.512291 19.4378L1.32905 15.7679L4.12208 18.5625ZM17.4242 0.928276L19.2386 2.74265C19.5871 3.09122 19.5872 3.65171 19.2386 4.00034C19.2386 4.00034 19.2385 4.00035 19.2385 4.00035L17.5648 5.67405L14.2035 2.31271L15.5873 0.928875C15.5875 0.928717 15.5876 0.928559 15.5878 0.928401C16.0966 0.421816 16.9187 0.422833 17.4242 0.928276Z" stroke="#BBBBBB"></path></g><defs><clipPath id="clip0_3484_16629"><rect width="20" height="20" fill="white"></rect></clipPath></defs></svg></button><button type="button" class="icon-btn company-contact-delete"><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6.36328" y="7.13623" width="0.999999" height="19" transform="rotate(-45 6.36328 7.13623)" fill="#BBBBBB"></rect><rect x="19.7988" y="6.42871" width="1" height="19" transform="rotate(45 19.7988 6.42871)" fill="#BBBBBB"></rect></svg></button></div></td></tr>')}(),w(re,this),u($("#popup-add-contact-address")),I(),r(),e.fadeOut(),function(e){let t=e.previousElementSibling,n=document.querySelectorAll(".table-amount-contacts");for(let e=0;e<n.length;e++)n[e].closest(".companies__main-tr")==t&&(n[e].textContent=1*n[e].textContent+1)}(he)})),$(document).on("click",".company-contact-delete",(function(){let e=this.closest(".companies__table-inner tbody"),t=this.closest("tr"),n=t.closest(".companies__sub-tr");e.removeChild(t),I(),r(),function(e){let t=e.previousElementSibling,n=document.querySelectorAll(".table-amount-contacts");for(let e=0;e<n.length;e++)n[e].closest(".companies__main-tr")==t&&(n[e].textContent=1*n[e].textContent-1)}(n)}));const _e=document.querySelector('.edit-contact-address input[name="my_fio"]'),ye=document.querySelector('.edit-contact-address input[name="my_tel"]'),fe=document.querySelectorAll(".edit-contact-address__input"),ge=document.querySelector(".edit-contact-address-submit"),ve=document.querySelector(".edit-contact-address-cansel");let be;$(document).on("click",".company-contact-edit",(function(){e.fadeIn(),d($("#popup-edit-contact-address")),be=this.closest("tr"),Q(document.querySelectorAll(".contact-name"),_e,"tr",be),Q(document.querySelectorAll(".contact-tel"),ye,"tr",be),q(fe,ge)}));for(let e=0;e<fe.length;e++)fe[e].addEventListener("input",(function(){q(fe,ge)}));ve.addEventListener("click",(function(){document.querySelector("#popup-add-contact-address .popup__close").click(),w(fe,ge)})),ge.addEventListener("click",(function(t){t.preventDefault(),function(){let e=document.querySelectorAll(".contact-name"),t=document.querySelectorAll(".contact-tel"),n={name:_e.value,tel:ye.value};for(let o=0;o<e.length;o++)e[o].closest("tr")==be&&(e[o].textContent=n.name,t[o].textContent=n.tel)}(),w(fe,this),u($("#popup-edit-contact-address")),I(),r(),e.fadeOut()}));const Se=document.querySelector(".personal-page__scale .scale");!function(){let e=document.querySelectorAll(".personal-page__tab");for(let t=0;t<e.length;t++)if(e[t].classList.contains("current")){Se.style.width=e[t].getBoundingClientRect().width+"px";break}}(),$(document).on("click",".personal-page__tab",(function(){var e;!function(){let e=document.querySelectorAll(".personal-page__tab");for(let t=0;t<e.length;t++)e[t].classList.remove("current")}(),this.classList.add("current"),e=this,Se.style.width=e.getBoundingClientRect().width+"px",Se.style.left=e.offsetLeft+"px",function(){let e=document.querySelectorAll(".personal-page__tab"),t=document.querySelectorAll(".personal-page__panel");for(let n=0;n<e.length;n++)t[n].classList.remove("active"),e[n].classList.contains("current")&&t[n].classList.add("active")}(),function(e){let t=document.querySelectorAll(".personal-page__title");if(t.length>0)for(let n=0;n<t.length;n++)t[n].getAttribute("data-title")==e?t[n].classList.remove("d-none"):t[n].classList.add("d-none")}(this.getAttribute("data-tab")),r()}));const Le=document.querySelectorAll(".period-calendar"),we=document.querySelectorAll(".period-start"),qe=document.querySelectorAll(".period-end");for(let e=0;e<Le.length;e++)Le[e].addEventListener("change",(function(){let e=this,t=e.value.split("-").reverse().join(".");if(e.classList.contains("period-calendar_start"))for(let n=0;n<we.length;n++)we[n].closest(".periods__item")==e.closest(".periods__item")&&(we[n].textContent=t);else if(e.classList.contains("period-calendar_end"))for(let n=0;n<qe.length;n++)qe[n].closest(".periods__item")==e.closest(".periods__item")&&(qe[n].textContent=t)}));const xe=document.querySelector(".act-request-btn"),Be=document.querySelector(".act-request-cansel"),Ae=document.querySelector(".act-request-submit"),ke=document.querySelectorAll(".act-request__input");function Ce(){for(let e=0;e<we.length;e++)we[e].closest("#popup-act-request")&&(we[e].textContent="");for(let e=0;e<qe.length;e++)qe[e].closest("#popup-act-request")&&(qe[e].textContent="")}xe&&xe.addEventListener("click",(function(){e.fadeIn(),d($("#popup-act-request"))})),Be&&Be.addEventListener("click",(function(){document.querySelector("#popup-act-request .popup__close").click(),w(ke,Ae),Ce()}));for(let e=0;e<ke.length;e++)ke[e].addEventListener("input",(function(){q(ke,Ae)}));if(Ae&&Ae.addEventListener("click",(function(e){e.preventDefault(),d($("#popup-act-request-result")),w(ke,this),Ce(),u($("#popup-act-request"))})),window.matchMedia("(max-width: 1024px)").matches){const e=document.querySelector(".my-manager__tel");e&&e.setAttribute("href",e.getAttribute("data-mobile-href"))}function $e(){let e=document.querySelectorAll(".excel-table .num"),t=document.querySelectorAll('.excel-table input[name^="art_excel"]'),n=document.querySelectorAll('.excel-table input[name^="count_excel"]'),o=document.querySelectorAll('.excel-table .delete[id^="art_excel"]');for(let t=0;t<e.length;t++)e[t].textContent=t+1;for(let e=0;e<t.length;e++)t[e].setAttribute("name","art_excel_"+(e+1));for(let e=0;e<n.length;e++)n[e].setAttribute("name","count_excel_"+(e+1));for(let e=0;e<o.length;e++)o[e].setAttribute("id","art_excel_"+(e+1))}$(document).on("click",".excel-loading-info-btn",(function(){e.fadeIn(),d($("#popup-loading-rules")),scrollLock.addScrollableSelector(".popup .wrapper"),p(document.querySelector("#popup-loading-rules .wrapper"))})),window.addEventListener("paste",(function(e){let t=(e.clipboardData||window.clipboardData).getData("text"),n=t.replace(/\r/g,"").split(/[\t\n]/g);if(e.target&&"input"==e.target.tagName.toLowerCase()&&e.target.closest(".excel-table")){if(t.match(/[\t\n]/g)){let t,o;t=document.querySelectorAll(".excel-table input");for(let n=0;n<t.length;n++)t[n]==e.target&&(o=n);let l=1;0!=o&&o%2!=0||(l=0);for(let e=0;e<n.length;e++){console.log("-------------");let c=o+l+e;t=document.querySelectorAll(".excel-table input"),t[c]?(t[c].value="",t[c].value=n[e]):t[c-1].closest("tr").insertAdjacentHTML("afterEnd",'<tr><td class="num"></td><td><input name="art_excel_0" type="text" value="'+n[e]+'"></td><td><input name="count_excel_0" type="text"></td><td class="delete" id="art_excel_0"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6.36328" y="18.3848" width="1" height="17" transform="rotate(-135 6.36328 18.3848)" fill="#BBBBBB"/><rect x="5.65625" y="6.36395" width="1" height="17" transform="rotate(-45 5.65625 6.36395)" fill="#BBBBBB"/></svg></td></tr>')}$e(),r(),e.preventDefault()}q(document.querySelectorAll(".excel-table input"),He)}})),$(document).on("keydown",".excel-table input",(function(e){"Enter"==e.key&&(e.target.closest("tr").insertAdjacentHTML("afterEnd",'<tr><td class="num"></td><td><input name="art_excel_0" type="text"></td><td><input name="count_excel_0" type="text"></td><td class="delete" id="art_excel_0"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6.36328" y="18.3848" width="1" height="17" transform="rotate(-135 6.36328 18.3848)" fill="#BBBBBB"/><rect x="5.65625" y="6.36395" width="1" height="17" transform="rotate(-45 5.65625 6.36395)" fill="#BBBBBB"/></svg></td></tr>'),$e(),r())})),$(document).on("click",".excel-table .delete",(function(e){let t=document.querySelectorAll(".excel-table tr"),n=e.target.closest("tr");if(2!=t.length)document.querySelector(".excel-table tbody").removeChild(n);else{let e=document.querySelectorAll(".excel-table input");for(let t=0;t<e.length;t++)e[t].value="";He.classList.add("disabled")}$e(),r(),q(document.querySelectorAll(".excel-table input"),He)}));const Ee=document.querySelector(".clear-table-btn"),He=document.querySelector(".create-order-btn");Ee&&Ee.addEventListener("click",(function(){let e=document.querySelectorAll(".excel-table input");for(let t=0;t<e.length;t++)e[t].value="";q(document.querySelectorAll(".excel-table input"),He)})),He&&He.addEventListener("click",(function(){$(".excel-order-section").removeClass("d-none")})),$(document).on("input",".excel-table input",(function(){q(document.querySelectorAll(".excel-table input"),He)}));const Me=document.querySelector(".excel-loading__file"),Pe=document.querySelector(".load-to-cart-btn");function Ie(e){let t=document.querySelectorAll(e);for(let e=0;e<t.length;e++)t[e].scrollWidth>t[e].offsetWidth?t[e].children[1].classList.remove("d-none"):t[e].children[1].classList.add("d-none")}Me&&Me.addEventListener("input",(function(){e.fadeIn(),d($("#popup-loading-table"))})),Pe&&Pe.addEventListener("click",(function(){e.fadeIn(),d($("#popup-loading-table-to-cart"))})),$(document).on("click",".loading-table__buttons .button",(function(){document.querySelector("#popup-loading-table .popup__close").click()})),$(document).on("click",".loading-table-to-cart__buttons .button",(function(){document.querySelector("#popup-loading-table-to-cart .popup__close").click()})),Ie(".analytics__table_inner"),$(document).on("touchmove",".analytics__table_inner table",(function(){let e=this.closest(".analytics__table_inner").getBoundingClientRect().left,t=this.closest(".analytics__table_inner").getBoundingClientRect().width,n=this.getBoundingClientRect().width;this.getBoundingClientRect().left-10>=e-(n-t)?this.nextElementSibling.classList.remove("op-0"):this.nextElementSibling.classList.add("op-0")})),$(document).on("click",".analytics__select .select__item",(function(){let e=document.querySelectorAll(".analytics__content");for(let t=0;t<e.length;t++)e[t].closest(".personal-page__panel")==this.closest(".personal-page__panel")&&(e[t].classList.add("d-none"),0!=this.getAttribute("data-company-select")?e[t].getAttribute("data-company-tab")==this.getAttribute("data-company-select")&&e[t].classList.remove("d-none"):e[t].classList.remove("d-none"));r(),document.querySelector(".purchases__panel").classList.contains("active")&&Re()}));document.querySelectorAll(".analytics .personal-page__panel");function Re(){if(document.querySelectorAll(".purchases__circle").forEach((function(e){e.innerHTML=""})),document.querySelector(".purchases__panel").classList.contains("active")){document.querySelectorAll(".purchases__circle").forEach((function(e){e.innerHTML='<div class="circle_outer"></div><div class="circle"><div class="circle_inner"></div></div><div class="purchases__percent"><p>'+e.getAttribute("data-percent")+"%</p></div>"}));let e=document.querySelectorAll(".purchases__circle .circle");for(let t=0;t<e.length;t++){let n=e[t].nextElementSibling.children[0].textContent.replace("%",""),o=e[t],l=1.5;o.classList.add("circle-animation"),o.children[0].classList.add("circle-animation"),setTimeout((function(){o.style.animationPlayState="paused",o.children[0].style.animationPlayState="paused"}),l/100*n*1e3)}}}$(document).on("click",".analytics-page .personal-page__tab",(function(){Re()}));const Oe=document.querySelector(".operations__title");Oe&&Oe.addEventListener("click",(function(){this.classList.toggle("active"),this.classList.contains("active")?$(".loyalty__table").slideDown():$(".loyalty__table").slideUp(),setTimeout((()=>{r(),Ie(".operations__table_inner")}),400)})),$(document).on("touchmove",".operations__table_inner table",(function(){let e=this.closest(".operations__table_inner").getBoundingClientRect().left,t=this.closest(".operations__table_inner").getBoundingClientRect().width,n=this.getBoundingClientRect().width;this.getBoundingClientRect().left-10>=e-(n-t)?this.nextElementSibling.classList.remove("op-0"):this.nextElementSibling.classList.add("op-0")}))}));